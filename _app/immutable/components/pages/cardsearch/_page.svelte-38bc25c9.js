import{S as ee,i as te,s as le,k as v,q as S,l as k,m as E,r as D,h as _,n as p,b as R,D as g,L as Y,u as Z,C as G,J as ve,o as Se,M as ke,v as De,N as Te,O as je,P as ne,a as W,c as z,E as qe,Q as ye,R as oe,f as P,d as ie,T as Le,t as x,U as Ve,x as Ce,y as Fe,z as Ee,A as we,e as ce,g as fe,V as We}from"../../../chunks/index-1c6920e6.js";import{w as ze}from"../../../chunks/index-83172051.js";const Re=[["earth","e"],["wood","g"],["fire","r"],["water","b"],["metal","m"],["colorless","c"]];let Ne={};Re.forEach(n=>{let e=n[0];Ne[e]=!0});const Q=ze({factionList:Re,factionFilter:Ne,factionEquals:!1,searchField:""});function Be(n){let e,r,t,l;return{c(){e=v("button"),r=S(n[0]),this.h()},l(a){e=k(a,"BUTTON",{type:!0,class:!0});var s=E(e);r=D(s,n[0]),s.forEach(_),this.h()},h(){p(e,"type","button"),p(e,"class","svelte-ptki0k")},m(a,s){R(a,e,s),g(e,r),n[3](e),t||(l=Y(e,"click",n[2]),t=!0)},p(a,[s]){s&1&&Z(r,a[0])},i:G,o:G,d(a){a&&_(e),n[3](null),t=!1,l()}}}function Ae(n,e,r){let t;ve(n,Q,i=>r(5,t=i));let{factionName:l}=e,a=!0,s;Se(()=>{r(1,s.style.backgroundColor=`var(--faction-color-${l})`,s),r(1,s.style.color="var(--light-text-color)",s)});const h=()=>{a?(r(1,s.style.backgroundColor="var(--faction-color-inactive)",s),r(1,s.style.color="var(--faded-text-color)",s)):a||(r(1,s.style.backgroundColor=`var(--faction-color-${l})`,s),r(1,s.style.color="var(--light-text-color)",s)),a=!a,ke(Q,t.factionFilter[l]=a,t)};function f(i){De[i?"unshift":"push"](()=>{s=i,r(1,s)})}return n.$$set=i=>{"factionName"in i&&r(0,l=i.factionName)},[l,s,h,f]}class Me extends ee{constructor(e){super(),te(this,e,Ae,Be,le,{factionName:0})}}function ue(n,{delay:e=0,duration:r=400,easing:t=Te}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:r,easing:t,css:a=>`opacity: ${a*l}`}}function he(n,e,r){const t=n.slice();return t[8]=e[r],t}function Ue(n){let e,r,t,l,a;function s(i,d){return i[4]?He:Pe}let f=s(n)(n);return{c(){e=v("div"),r=v("h3"),t=S(n[1]),l=S(" Ruling Clarifications"),a=W(),f.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var d=E(e);r=k(d,"H3",{class:!0});var C=E(r);t=D(C,n[1]),l=D(C," Ruling Clarifications"),C.forEach(_),a=z(d),f.l(d),d.forEach(_),this.h()},h(){p(r,"class","svelte-6jz1tw"),p(e,"class","rulingsDisplayWrapper svelte-6jz1tw")},m(i,d){R(i,e,d),g(e,r),g(r,t),g(r,l),g(e,a),f.m(e,null)},p(i,d){f.p(i,d)},d(i){i&&_(e),f.d()}}}function $e(n){let e,r;return{c(){e=v("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){qe(e.src,r=`https://calebgannon.com/wp-content/uploads/cardsearch-images/${n[2]}.jpg`)||p(e,"src",r),p(e,"alt",`${n[1]}`),p(e,"class","svelte-6jz1tw")},m(t,l){R(t,e,l)},p:G,d(t){t&&_(e)}}}function Pe(n){let e,r=n[3],t=[];for(let l=0;l<r.length;l+=1)t[l]=de(he(n,r,l));return{c(){e=v("ul");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=k(l,"UL",{class:!0});var a=E(e);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(_),this.h()},h(){p(e,"class","svelte-6jz1tw")},m(l,a){R(l,e,a);for(let s=0;s<t.length;s+=1)t[s].m(e,null)},p(l,a){if(a&8){r=l[3];let s;for(s=0;s<r.length;s+=1){const h=he(l,r,s);t[s]?t[s].p(h,a):(t[s]=de(h),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=r.length}},d(l){l&&_(e),ye(t,l)}}}function He(n){let e,r,t,l,a;return{c(){e=v("div"),r=S(n[3]),t=W(),l=v("a"),a=S("Click Here"),this.h()},l(s){e=k(s,"DIV",{});var h=E(e);r=D(h,n[3]),t=z(h),l=k(h,"A",{target:!0,rel:!0,href:!0,class:!0});var f=E(l);a=D(f,"Click Here"),f.forEach(_),h.forEach(_),this.h()},h(){p(l,"target","_blank"),p(l,"rel","noreferrer"),p(l,"href","https://discord.gg/VWwdWheXbQ"),p(l,"class","svelte-6jz1tw")},m(s,h){R(s,e,h),g(e,r),g(e,t),g(e,l),g(l,a)},p:G,d(s){s&&_(e)}}}function de(n){let e,r=n[8]+"",t;return{c(){e=v("li"),t=S(r),this.h()},l(l){e=k(l,"LI",{class:!0});var a=E(e);t=D(a,r),a.forEach(_),this.h()},h(){p(e,"class","svelte-6jz1tw")},m(l,a){R(l,e,a),g(e,t)},p:G,d(l){l&&_(e)}}}function Oe(n){let e,r,t,l,a;function s(i,d){return i[0]?Ue:$e}let h=s(n),f=h(n);return{c(){e=v("button"),f.c(),this.h()},l(i){e=k(i,"BUTTON",{class:!0});var d=E(e);f.l(d),d.forEach(_),this.h()},h(){p(e,"class","cardWrapper svelte-6jz1tw")},m(i,d){R(i,e,d),f.m(e,null),t=!0,l||(a=Y(e,"click",n[5]),l=!0)},p(i,[d]){h===(h=s(i))&&f?f.p(i,d):(f.d(1),f=h(i),f&&(f.c(),f.m(e,null)))},i(i){t||(je(()=>{r||(r=ne(e,ue,{duration:300},!0)),r.run(1)}),t=!0)},o(i){r||(r=ne(e,ue,{duration:300},!1)),r.run(0),t=!1},d(i){i&&_(e),f.d(),i&&r&&r.end(),l=!1,a()}}}function xe(n,e,r){var C,I;let{cardInfo:t}=e,l=t?t[0].name:"default";const a=l.replace(/[.,/#!$%^&*;:{}=_`'~()]/g,"").split(" ").join("-"),s=["No rulings for this card have been made yet. You can request a ruling or ask a question in the Algomancy Discord - "],h=!!((C=t[0])!=null&&C.rulings.length)>0?t[0].rulings:s,f=!(!!((I=t[0])!=null&&I.rulings.length)>0);let i=!1;function d(){r(0,i=!i)}return n.$$set=q=>{"cardInfo"in q&&r(6,t=q.cardInfo)},[i,l,a,h,f,d,t]}class Qe extends ee{constructor(e){super(),te(this,e,xe,Oe,le,{cardInfo:6})}}function Ge(n,e,r,t,l){let a=!1,s=[],h="",f="",i="",d=!1,C=[],I=n.split(" ");if(/(^\/).*([^\\]\/g?i?m?)$/g.test(n)){a=n.at(-1)!=="/",s=n.split("/").filter(F=>F!==""),a?a&&(f=s.pop().replace(/[^gim]/g,""),h=s.join("/")):h=s.join("/");try{i=new RegExp(h,f),d=!0}catch(F){console.error(F)}}return C=r.filter(F=>{let M=!1,j=!1,L=e[F][0],U=L.text,T=L.type,y=F.concat(" ",U," ",T),$=L.factions,N=[];for(let w in t)t[w]&&N.push(w);let B=!1;if(l){if(N.length===$.length)for(let b=0;b<N.length&&N.includes($[b]);b++)b===N.length-1&&(B=!0)}else l||(B=N.some(w=>$.includes(w)));if(d){if(d)try{j=i.test(y)}catch(w){console.error(w)}}else for(let w=0;w<I.length&&y.toLowerCase().includes(I[w].toLowerCase());w++)w===I.length-1&&(j=!0);return j&&B&&(M=!0),M}),C}function _e(n,e,r){const t=n.slice();return t[6]=e[r],t}function pe(n,e,r){const t=n.slice();return t[9]=e[r],t}function ge(n){let e,r;return{c(){e=v("p"),r=S("Regex Search: modifiers must be in alphabetical order"),this.h()},l(t){e=k(t,"P",{class:!0});var l=E(e);r=D(l,"Regex Search: modifiers must be in alphabetical order"),l.forEach(_),this.h()},h(){p(e,"class","modifierMessage svelte-1tckao0")},m(t,l){R(t,e,l),g(e,r)},d(t){t&&_(e)}}}function me(n){let e,r;return e=new Me({props:{factionName:n[9][0]}}),{c(){Ce(e.$$.fragment)},l(t){Fe(e.$$.fragment,t)},m(t,l){Ee(e,t,l),r=!0},p(t,l){const a={};l&4&&(a.factionName=t[9][0]),e.$set(a)},i(t){r||(P(e.$$.fragment,t),r=!0)},o(t){x(e.$$.fragment,t),r=!1},d(t){we(e,t)}}}function be(n,e){let r,t,l;return t=new Qe({props:{cardInfo:e[0].totalCardInfo[e[6]]}}),{key:n,first:null,c(){r=ce(),Ce(t.$$.fragment),this.h()},l(a){r=ce(),Fe(t.$$.fragment,a),this.h()},h(){this.first=r},m(a,s){R(a,r,s),Ee(t,a,s),l=!0},p(a,s){e=a;const h={};s&3&&(h.cardInfo=e[0].totalCardInfo[e[6]]),t.$set(h)},i(a){l||(P(t.$$.fragment,a),l=!0)},o(a){x(t.$$.fragment,a),l=!1},d(a){a&&_(r),we(t,a)}}}function Je(n){let e,r,t,l,a,s,h,f,i,d,C,I=`Total Results: ${n[3]}`,q,J,F,M,j=n[2].factionEquals+"",L,U,T,y=[],$=new Map,N,B,w,b=n[2].isRegex&&ge(),V=n[2].factionList,m=[];for(let o=0;o<V.length;o+=1)m[o]=me(pe(n,V,o));const Ie=o=>x(m[o],1,1,()=>{m[o]=null});let H=n[1];const re=o=>o[6];for(let o=0;o<H.length;o+=1){let c=_e(n,H,o),u=re(c);$.set(u,y[o]=be(u,c))}return{c(){e=v("h1"),r=S("Search all available Algomancy cards"),t=W(),l=v("div"),a=v("input"),s=W(),b&&b.c(),h=W(),f=v("div");for(let o=0;o<m.length;o+=1)m[o].c();i=W(),d=v("div"),C=v("p"),q=S(I),J=W(),F=v("button"),M=S("Faction Filter: "),L=S(j),U=W(),T=v("div");for(let o=0;o<y.length;o+=1)y[o].c();this.h()},l(o){e=k(o,"H1",{});var c=E(e);r=D(c,"Search all available Algomancy cards"),c.forEach(_),t=z(o),l=k(o,"DIV",{class:!0});var u=E(l);a=k(u,"INPUT",{type:!0,placeholder:!0,class:!0}),s=z(u),b&&b.l(u),h=z(u),f=k(u,"DIV",{class:!0});var O=E(f);for(let A=0;A<m.length;A+=1)m[A].l(O);O.forEach(_),i=z(u),d=k(u,"DIV",{class:!0});var X=E(d);C=k(X,"P",{class:!0});var ae=E(C);q=D(ae,I),ae.forEach(_),J=z(X),F=k(X,"BUTTON",{class:!0,type:!0});var K=E(F);M=D(K,"Faction Filter: "),L=D(K,j),K.forEach(_),X.forEach(_),u.forEach(_),U=z(o),T=k(o,"DIV",{class:!0});var se=E(T);for(let A=0;A<y.length;A+=1)y[A].l(se);se.forEach(_),this.h()},h(){p(a,"type","search"),p(a,"placeholder","Search Cards (Regex or Text)"),p(a,"class","svelte-1tckao0"),p(f,"class","buttonWrapper"),p(C,"class","svelte-1tckao0"),p(F,"class","factionButton"),p(F,"type","button"),p(d,"class","flexWrapper svelte-1tckao0"),p(l,"class","searchWrapper"),p(T,"class","displayWrapper svelte-1tckao0")},m(o,c){R(o,e,c),g(e,r),R(o,t,c),R(o,l,c),g(l,a),oe(a,n[2].searchField),g(l,s),b&&b.m(l,null),g(l,h),g(l,f);for(let u=0;u<m.length;u+=1)m[u].m(f,null);g(l,i),g(l,d),g(d,C),g(C,q),g(d,J),g(d,F),g(F,M),g(F,L),R(o,U,c),R(o,T,c);for(let u=0;u<y.length;u+=1)y[u].m(T,null);N=!0,B||(w=[Y(a,"input",n[5]),Y(F,"click",n[4])],B=!0)},p(o,[c]){if(c&4&&oe(a,o[2].searchField),o[2].isRegex?b||(b=ge(),b.c(),b.m(l,h)):b&&(b.d(1),b=null),c&4){V=o[2].factionList;let u;for(u=0;u<V.length;u+=1){const O=pe(o,V,u);m[u]?(m[u].p(O,c),P(m[u],1)):(m[u]=me(O),m[u].c(),P(m[u],1),m[u].m(f,null))}for(fe(),u=V.length;u<m.length;u+=1)Ie(u);ie()}(!N||c&8)&&I!==(I=`Total Results: ${o[3]}`)&&Z(q,I),(!N||c&4)&&j!==(j=o[2].factionEquals+"")&&Z(L,j),c&3&&(H=o[1],fe(),y=Le(y,c,re,1,o,H,$,T,We,be,null,_e),ie())},i(o){if(!N){for(let c=0;c<V.length;c+=1)P(m[c]);for(let c=0;c<H.length;c+=1)P(y[c]);N=!0}},o(o){m=m.filter(Boolean);for(let c=0;c<m.length;c+=1)x(m[c]);for(let c=0;c<y.length;c+=1)x(y[c]);N=!1},d(o){o&&_(e),o&&_(t),o&&_(l),b&&b.d(),ye(m,o),o&&_(U),o&&_(T);for(let c=0;c<y.length;c+=1)y[c].d();B=!1,Ve(w)}}}function Xe(n,e,r){let t,l,a;ve(n,Q,i=>r(2,a=i));let{data:s}=e;function h(){ke(Q,a.factionEquals=!a.factionEquals,a),console.log(a)}function f(){a.searchField=this.value,Q.set(a)}return n.$$set=i=>{"data"in i&&r(0,s=i.data)},n.$$.update=()=>{n.$$.dirty&5&&r(1,t=Ge(a.searchField,s.totalCardInfo,s.totalCardNames,a.factionFilter,a.factionEquals)),n.$$.dirty&2&&r(3,l=t.length)},[s,t,a,l,h,f]}class Ze extends ee{constructor(e){super(),te(this,e,Xe,Je,le,{data:0})}}export{Ze as default};
