import{S as he,i as de,s as _e,k as E,q as A,l as S,m as T,r as O,h as _,n as k,b as q,D as b,K as Y,u as Z,C as le,J as pe,o as Ee,M as me,v as Se,a as V,c as W,N as ae,f as U,d as oe,O as Ne,t as J,L as Re,P as we,x as ge,y as be,z as ve,A as ye,e as se,g as re,Q as Te}from"../../../chunks/index-817daa1c.js";import{w as xe}from"../../../chunks/index-442f0354.js";import{C as Le}from"../../../chunks/CardContainer-36ade0a3.js";const ke=[["earth","e"],["wood","g"],["fire","r"],["water","b"],["metal","m"],["colorless","c"]];let Fe={};ke.forEach(s=>{let e=s[0];Fe[e]=!0});const K=xe({factionList:ke,factionFilter:Fe,factionEquals:!1,searchField:""});function qe(s){let e,o,l,r;return{c(){e=E("button"),o=A(s[0]),this.h()},l(t){e=S(t,"BUTTON",{type:!0,class:!0});var n=T(e);o=O(n,s[0]),n.forEach(_),this.h()},h(){k(e,"type","button"),k(e,"class","svelte-ptki0k")},m(t,n){q(t,e,n),b(e,o),s[3](e),l||(r=Y(e,"click",s[2]),l=!0)},p(t,[n]){n&1&&Z(o,t[0])},i:le,o:le,d(t){t&&_(e),s[3](null),l=!1,r()}}}function Ie(s,e,o){let l;pe(s,K,h=>o(5,l=h));let{factionName:r}=e,t=!0,n;Ee(()=>{o(1,n.style.backgroundColor=`var(--faction-color-${r})`,n),o(1,n.style.color="var(--light-text-color)",n)});const m=()=>{t?(o(1,n.style.backgroundColor="var(--faction-color-inactive)",n),o(1,n.style.color="var(--faded-text-color)",n)):t||(o(1,n.style.backgroundColor=`var(--faction-color-${r})`,n),o(1,n.style.color="var(--light-text-color)",n)),t=!t,me(K,l.factionFilter[r]=t,l)};function v(h){Se[h?"unshift":"push"](()=>{n=h,o(1,n)})}return s.$$set=h=>{"factionName"in h&&o(0,r=h.factionName)},[r,n,m,v]}class De extends he{constructor(e){super(),de(this,e,Ie,qe,_e,{factionName:0})}}function Be(s,e,o,l,r){let t=!1,n=[],m="",v="",h="",F=!1,N=[],R=s.split(" ");if(/(^\/).*([^\\]\/g?i?m?)$/g.test(s)){t=s.at(-1)!=="/",n=s.split("/").filter(p=>p!==""),t?t&&(v=n.pop().replace(/[^gim]/g,""),m=n.join("/")):m=n.join("/");try{h=new RegExp(m,v),F=!0}catch(p){console.error(p)}}return N=o.filter(p=>{let B=!1,w=!1,x=e[p][0],M=x.text,C=x.type,d=p.concat(" ",M," ",C),P=x.factions,y=[];for(let g in l)l[g]&&y.push(g);let I=!1;if(r){if(y.length===P.length)for(let u=0;u<y.length&&y.includes(P[u]);u++)u===y.length-1&&(I=!0)}else r||(I=y.some(g=>P.includes(g)));if(F){if(F)try{w=h.test(d)}catch(g){console.error(g)}}else for(let g=0;g<R.length&&d.toLowerCase().includes(R[g].toLowerCase());g++)g===R.length-1&&(w=!0);return w&&I&&(B=!0),B}),N}function ne(s,e,o){const l=s.slice();return l[6]=e[o],l}function ie(s,e,o){const l=s.slice();return l[9]=e[o],l}function ce(s){let e,o;return{c(){e=E("p"),o=A("Regex Search: modifiers must be in alphabetical order"),this.h()},l(l){e=S(l,"P",{class:!0});var r=T(e);o=O(r,"Regex Search: modifiers must be in alphabetical order"),r.forEach(_),this.h()},h(){k(e,"class","modifierMessage svelte-2o6202")},m(l,r){q(l,e,r),b(e,o)},d(l){l&&_(e)}}}function fe(s){let e,o;return e=new De({props:{factionName:s[9][0]}}),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,r){ve(e,l,r),o=!0},p(l,r){const t={};r&4&&(t.factionName=l[9][0]),e.$set(t)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){J(e.$$.fragment,l),o=!1},d(l){ye(e,l)}}}function ue(s,e){let o,l,r;return l=new Le({props:{cardInfo:e[0].totalCardInfo[e[6]]}}),{key:s,first:null,c(){o=se(),ge(l.$$.fragment),this.h()},l(t){o=se(),be(l.$$.fragment,t),this.h()},h(){this.first=o},m(t,n){q(t,o,n),ve(l,t,n),r=!0},p(t,n){e=t;const m={};n&3&&(m.cardInfo=e[0].totalCardInfo[e[6]]),l.$set(m)},i(t){r||(U(l.$$.fragment,t),r=!0)},o(t){J(l.$$.fragment,t),r=!1},d(t){t&&_(o),ye(l,t)}}}function Me(s){let e,o,l,r,t,n,m,v,h,F,N,R=`Total Results: ${s[3]}`,j,Q,p,B,w=s[2].factionEquals+"",x,M,C,d=[],P=new Map,y,I,g,u=s[2].isRegex&&ce(),L=s[2].factionList,f=[];for(let a=0;a<L.length;a+=1)f[a]=fe(ie(s,L,a));const Ce=a=>J(f[a],1,1,()=>{f[a]=null});let z=s[1];const $=a=>a[6];for(let a=0;a<z.length;a+=1){let i=ne(s,z,a),c=$(i);P.set(c,d[a]=ue(c,i))}return{c(){e=E("h1"),o=A("Search all available Algomancy cards"),l=V(),r=E("div"),t=E("input"),n=V(),u&&u.c(),m=V(),v=E("div");for(let a=0;a<f.length;a+=1)f[a].c();h=V(),F=E("div"),N=E("p"),j=A(R),Q=V(),p=E("button"),B=A("Faction Filter: "),x=A(w),M=V(),C=E("div");for(let a=0;a<d.length;a+=1)d[a].c();this.h()},l(a){e=S(a,"H1",{});var i=T(e);o=O(i,"Search all available Algomancy cards"),i.forEach(_),l=W(a),r=S(a,"DIV",{class:!0});var c=T(r);t=S(c,"INPUT",{type:!0,placeholder:!0,class:!0}),n=W(c),u&&u.l(c),m=W(c),v=S(c,"DIV",{class:!0});var H=T(v);for(let D=0;D<f.length;D+=1)f[D].l(H);H.forEach(_),h=W(c),F=S(c,"DIV",{class:!0});var G=T(F);N=S(G,"P",{class:!0});var ee=T(N);j=O(ee,R),ee.forEach(_),Q=W(G),p=S(G,"BUTTON",{class:!0,type:!0});var X=T(p);B=O(X,"Faction Filter: "),x=O(X,w),X.forEach(_),G.forEach(_),c.forEach(_),M=W(a),C=S(a,"DIV",{class:!0});var te=T(C);for(let D=0;D<d.length;D+=1)d[D].l(te);te.forEach(_),this.h()},h(){k(t,"type","search"),k(t,"placeholder","Search Cards (Regex or Text)"),k(t,"class","svelte-2o6202"),k(v,"class","buttonWrapper"),k(N,"class","svelte-2o6202"),k(p,"class","factionButton"),k(p,"type","button"),k(F,"class","flexWrapper svelte-2o6202"),k(r,"class","searchWrapper"),k(C,"class","displayWrapper svelte-2o6202")},m(a,i){q(a,e,i),b(e,o),q(a,l,i),q(a,r,i),b(r,t),ae(t,s[2].searchField),b(r,n),u&&u.m(r,null),b(r,m),b(r,v);for(let c=0;c<f.length;c+=1)f[c].m(v,null);b(r,h),b(r,F),b(F,N),b(N,j),b(F,Q),b(F,p),b(p,B),b(p,x),q(a,M,i),q(a,C,i);for(let c=0;c<d.length;c+=1)d[c].m(C,null);y=!0,I||(g=[Y(t,"input",s[5]),Y(p,"click",s[4])],I=!0)},p(a,[i]){if(i&4&&ae(t,a[2].searchField),a[2].isRegex?u||(u=ce(),u.c(),u.m(r,m)):u&&(u.d(1),u=null),i&4){L=a[2].factionList;let c;for(c=0;c<L.length;c+=1){const H=ie(a,L,c);f[c]?(f[c].p(H,i),U(f[c],1)):(f[c]=fe(H),f[c].c(),U(f[c],1),f[c].m(v,null))}for(re(),c=L.length;c<f.length;c+=1)Ce(c);oe()}(!y||i&8)&&R!==(R=`Total Results: ${a[3]}`)&&Z(j,R),(!y||i&4)&&w!==(w=a[2].factionEquals+"")&&Z(x,w),i&3&&(z=a[1],re(),d=Ne(d,i,$,1,a,z,P,C,Te,ue,null,ne),oe())},i(a){if(!y){for(let i=0;i<L.length;i+=1)U(f[i]);for(let i=0;i<z.length;i+=1)U(d[i]);y=!0}},o(a){f=f.filter(Boolean);for(let i=0;i<f.length;i+=1)J(f[i]);for(let i=0;i<d.length;i+=1)J(d[i]);y=!1},d(a){a&&_(e),a&&_(l),a&&_(r),u&&u.d(),Re(f,a),a&&_(M),a&&_(C);for(let i=0;i<d.length;i+=1)d[i].d();I=!1,we(g)}}}function Pe(s,e,o){let l,r,t;pe(s,K,h=>o(2,t=h));let{data:n}=e;function m(){me(K,t.factionEquals=!t.factionEquals,t),console.log(t)}function v(){t.searchField=this.value,K.set(t)}return s.$$set=h=>{"data"in h&&o(0,n=h.data)},s.$$.update=()=>{s.$$.dirty&5&&o(1,l=Be(t.searchField,n.totalCardInfo,n.totalCardNames,t.factionFilter,t.factionEquals)),s.$$.dirty&2&&o(3,r=l.length)},[n,l,t,r,m,v]}class Oe extends he{constructor(e){super(),de(this,e,Pe,Me,_e,{data:0})}}export{Oe as default};
