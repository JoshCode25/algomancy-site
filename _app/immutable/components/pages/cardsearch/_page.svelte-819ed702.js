import{S as ee,i as te,s as le,k as b,q as S,l as k,m as E,r as D,h as d,n as _,b as R,D as p,K as X,u as Z,C as M,J as me,o as Ne,L as ve,v as Ie,a as z,c as V,E as Se,M as be,N as ne,f as H,d as oe,O as De,t as Q,P as Te,x as ke,y as ye,z as Ce,A as Fe,e as ie,g as ce,Q as je}from"../../../chunks/index-caf5efac.js";import{w as qe}from"../../../chunks/index-ea5d8265.js";const Ee=[["earth","e"],["wood","g"],["fire","r"],["water","b"],["metal","m"],["colorless","c"]];let we={};Ee.forEach(n=>{let e=n[0];we[e]=!0});const G=qe({factionList:Ee,factionFilter:we,factionEquals:!1,searchField:""});function Le(n){let e,s,t,l;return{c(){e=b("button"),s=S(n[0]),this.h()},l(a){e=k(a,"BUTTON",{type:!0,class:!0});var r=E(e);s=D(r,n[0]),r.forEach(d),this.h()},h(){_(e,"type","button"),_(e,"class","svelte-ptki0k")},m(a,r){R(a,e,r),p(e,s),n[3](e),t||(l=X(e,"click",n[2]),t=!0)},p(a,[r]){r&1&&Z(s,a[0])},i:M,o:M,d(a){a&&d(e),n[3](null),t=!1,l()}}}function We(n,e,s){let t;me(n,G,h=>s(5,t=h));let{factionName:l}=e,a=!0,r;Ne(()=>{s(1,r.style.backgroundColor=`var(--faction-color-${l})`,r),s(1,r.style.color="var(--light-text-color)",r)});const i=()=>{a?(s(1,r.style.backgroundColor="var(--faction-color-inactive)",r),s(1,r.style.color="var(--faded-text-color)",r)):a||(s(1,r.style.backgroundColor=`var(--faction-color-${l})`,r),s(1,r.style.color="var(--light-text-color)",r)),a=!a,ve(G,t.factionFilter[l]=a,t)};function u(h){Ie[h?"unshift":"push"](()=>{r=h,s(1,r)})}return n.$$set=h=>{"factionName"in h&&s(0,l=h.factionName)},[l,r,i,u]}class ze extends ee{constructor(e){super(),te(this,e,We,Le,le,{factionName:0})}}function fe(n,e,s){const t=n.slice();return t[8]=e[s],t}function Ve(n){let e,s,t,l,a;function r(h,g){return h[4]?Me:Ae}let u=r(n)(n);return{c(){e=b("div"),s=b("h3"),t=S(n[1]),l=S(" Ruling Clarifications"),a=z(),u.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var g=E(e);s=k(g,"H3",{class:!0});var C=E(s);t=D(C,n[1]),l=D(C," Ruling Clarifications"),C.forEach(d),a=V(g),u.l(g),g.forEach(d),this.h()},h(){_(s,"class","svelte-6jz1tw"),_(e,"class","rulingsDisplayWrapper svelte-6jz1tw")},m(h,g){R(h,e,g),p(e,s),p(s,t),p(s,l),p(e,a),u.m(e,null)},p(h,g){u.p(h,g)},d(h){h&&d(e),u.d()}}}function Be(n){let e,s;return{c(){e=b("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Se(e.src,s=`https://calebgannon.com/wp-content/uploads/cardsearch-images/${n[2]}.jpg`)||_(e,"src",s),_(e,"alt",`${n[1]}`),_(e,"class","svelte-6jz1tw")},m(t,l){R(t,e,l)},p:M,d(t){t&&d(e)}}}function Ae(n){let e,s=n[3],t=[];for(let l=0;l<s.length;l+=1)t[l]=ue(fe(n,s,l));return{c(){e=b("ul");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=k(l,"UL",{class:!0});var a=E(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(d),this.h()},h(){_(e,"class","svelte-6jz1tw")},m(l,a){R(l,e,a);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(l,a){if(a&8){s=l[3];let r;for(r=0;r<s.length;r+=1){const i=fe(l,s,r);t[r]?t[r].p(i,a):(t[r]=ue(i),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(l){l&&d(e),be(t,l)}}}function Me(n){let e,s,t,l,a;return{c(){e=b("div"),s=S(n[3]),t=z(),l=b("a"),a=S("Click Here"),this.h()},l(r){e=k(r,"DIV",{});var i=E(e);s=D(i,n[3]),t=V(i),l=k(i,"A",{target:!0,rel:!0,href:!0,class:!0});var u=E(l);a=D(u,"Click Here"),u.forEach(d),i.forEach(d),this.h()},h(){_(l,"target","_blank"),_(l,"rel","noreferrer"),_(l,"href","https://discord.gg/VWwdWheXbQ"),_(l,"class","svelte-6jz1tw")},m(r,i){R(r,e,i),p(e,s),p(e,t),p(e,l),p(l,a)},p:M,d(r){r&&d(e)}}}function ue(n){let e,s=n[8]+"",t;return{c(){e=b("li"),t=S(s),this.h()},l(l){e=k(l,"LI",{class:!0});var a=E(e);t=D(a,s),a.forEach(d),this.h()},h(){_(e,"class","svelte-6jz1tw")},m(l,a){R(l,e,a),p(e,t)},p:M,d(l){l&&d(e)}}}function Pe(n){let e,s,t;function l(i,u){return i[0]?Ve:Be}let a=l(n),r=a(n);return{c(){e=b("button"),r.c(),this.h()},l(i){e=k(i,"BUTTON",{class:!0});var u=E(e);r.l(u),u.forEach(d),this.h()},h(){_(e,"class","cardWrapper svelte-6jz1tw")},m(i,u){R(i,e,u),r.m(e,null),s||(t=X(e,"click",n[5]),s=!0)},p(i,[u]){a===(a=l(i))&&r?r.p(i,u):(r.d(1),r=a(i),r&&(r.c(),r.m(e,null)))},i:M,o:M,d(i){i&&d(e),r.d(),s=!1,t()}}}function Ue(n,e,s){var C,I;let{cardInfo:t}=e,l=t?t[0].name:"default";const a=l.replace(/[.,/#!$%^&*;:{}=_`'~()]/g,"").split(" ").join("-"),r=["No rulings for this card have been made yet. You can request a ruling or ask a question in the Algomancy Discord - "],i=!!((C=t[0])!=null&&C.rulings.length)>0?t[0].rulings:r,u=!(!!((I=t[0])!=null&&I.rulings.length)>0);let h=!1;function g(){s(0,h=!h)}return n.$$set=q=>{"cardInfo"in q&&s(6,t=q.cardInfo)},[h,l,a,i,u,g,t]}class $e extends ee{constructor(e){super(),te(this,e,Ue,Pe,le,{cardInfo:6})}}function He(n,e,s,t,l){let a=!1,r=[],i="",u="",h="",g=!1,C=[],I=n.split(" ");if(/(^\/).*([^\\]\/g?i?m?)$/g.test(n)){a=n.at(-1)!=="/",r=n.split("/").filter(F=>F!==""),a?a&&(u=r.pop().replace(/[^gim]/g,""),i=r.join("/")):i=r.join("/");try{h=new RegExp(i,u),g=!0}catch(F){console.error(F)}}return C=s.filter(F=>{let P=!1,j=!1,L=e[F][0],U=L.text,T=L.type,y=F.concat(" ",U," ",T),$=L.factions,N=[];for(let w in t)t[w]&&N.push(w);let B=!1;if(l){if(N.length===$.length)for(let v=0;v<N.length&&N.includes($[v]);v++)v===N.length-1&&(B=!0)}else l||(B=N.some(w=>$.includes(w)));if(g){if(g)try{j=h.test(y)}catch(w){console.error(w)}}else for(let w=0;w<I.length&&y.toLowerCase().includes(I[w].toLowerCase());w++)w===I.length-1&&(j=!0);return j&&B&&(P=!0),P}),C}function he(n,e,s){const t=n.slice();return t[6]=e[s],t}function de(n,e,s){const t=n.slice();return t[9]=e[s],t}function _e(n){let e,s;return{c(){e=b("p"),s=S("Regex Search: modifiers must be in alphabetical order"),this.h()},l(t){e=k(t,"P",{class:!0});var l=E(e);s=D(l,"Regex Search: modifiers must be in alphabetical order"),l.forEach(d),this.h()},h(){_(e,"class","modifierMessage svelte-1tckao0")},m(t,l){R(t,e,l),p(e,s)},d(t){t&&d(e)}}}function ge(n){let e,s;return e=new ze({props:{factionName:n[9][0]}}),{c(){ke(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,l){Ce(e,t,l),s=!0},p(t,l){const a={};l&4&&(a.factionName=t[9][0]),e.$set(a)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){Fe(e,t)}}}function pe(n,e){let s,t,l;return t=new $e({props:{cardInfo:e[0].totalCardInfo[e[6]]}}),{key:n,first:null,c(){s=ie(),ke(t.$$.fragment),this.h()},l(a){s=ie(),ye(t.$$.fragment,a),this.h()},h(){this.first=s},m(a,r){R(a,s,r),Ce(t,a,r),l=!0},p(a,r){e=a;const i={};r&3&&(i.cardInfo=e[0].totalCardInfo[e[6]]),t.$set(i)},i(a){l||(H(t.$$.fragment,a),l=!0)},o(a){Q(t.$$.fragment,a),l=!1},d(a){a&&d(s),Fe(t,a)}}}function Oe(n){let e,s,t,l,a,r,i,u,h,g,C,I=`Total Results: ${n[3]}`,q,J,F,P,j=n[2].factionEquals+"",L,U,T,y=[],$=new Map,N,B,w,v=n[2].isRegex&&_e(),W=n[2].factionList,m=[];for(let o=0;o<W.length;o+=1)m[o]=ge(de(n,W,o));const Re=o=>Q(m[o],1,1,()=>{m[o]=null});let O=n[1];const ae=o=>o[6];for(let o=0;o<O.length;o+=1){let c=he(n,O,o),f=ae(c);$.set(f,y[o]=pe(f,c))}return{c(){e=b("h1"),s=S("Search all available Algomancy cards"),t=z(),l=b("div"),a=b("input"),r=z(),v&&v.c(),i=z(),u=b("div");for(let o=0;o<m.length;o+=1)m[o].c();h=z(),g=b("div"),C=b("p"),q=S(I),J=z(),F=b("button"),P=S("Faction Filter: "),L=S(j),U=z(),T=b("div");for(let o=0;o<y.length;o+=1)y[o].c();this.h()},l(o){e=k(o,"H1",{});var c=E(e);s=D(c,"Search all available Algomancy cards"),c.forEach(d),t=V(o),l=k(o,"DIV",{class:!0});var f=E(l);a=k(f,"INPUT",{type:!0,placeholder:!0,class:!0}),r=V(f),v&&v.l(f),i=V(f),u=k(f,"DIV",{class:!0});var x=E(u);for(let A=0;A<m.length;A+=1)m[A].l(x);x.forEach(d),h=V(f),g=k(f,"DIV",{class:!0});var K=E(g);C=k(K,"P",{class:!0});var re=E(C);q=D(re,I),re.forEach(d),J=V(K),F=k(K,"BUTTON",{class:!0,type:!0});var Y=E(F);P=D(Y,"Faction Filter: "),L=D(Y,j),Y.forEach(d),K.forEach(d),f.forEach(d),U=V(o),T=k(o,"DIV",{class:!0});var se=E(T);for(let A=0;A<y.length;A+=1)y[A].l(se);se.forEach(d),this.h()},h(){_(a,"type","search"),_(a,"placeholder","Search Cards (Regex or Text)"),_(a,"class","svelte-1tckao0"),_(u,"class","buttonWrapper"),_(C,"class","svelte-1tckao0"),_(F,"class","factionButton"),_(F,"type","button"),_(g,"class","flexWrapper svelte-1tckao0"),_(l,"class","searchWrapper"),_(T,"class","displayWrapper svelte-1tckao0")},m(o,c){R(o,e,c),p(e,s),R(o,t,c),R(o,l,c),p(l,a),ne(a,n[2].searchField),p(l,r),v&&v.m(l,null),p(l,i),p(l,u);for(let f=0;f<m.length;f+=1)m[f].m(u,null);p(l,h),p(l,g),p(g,C),p(C,q),p(g,J),p(g,F),p(F,P),p(F,L),R(o,U,c),R(o,T,c);for(let f=0;f<y.length;f+=1)y[f].m(T,null);N=!0,B||(w=[X(a,"input",n[5]),X(F,"click",n[4])],B=!0)},p(o,[c]){if(c&4&&ne(a,o[2].searchField),o[2].isRegex?v||(v=_e(),v.c(),v.m(l,i)):v&&(v.d(1),v=null),c&4){W=o[2].factionList;let f;for(f=0;f<W.length;f+=1){const x=de(o,W,f);m[f]?(m[f].p(x,c),H(m[f],1)):(m[f]=ge(x),m[f].c(),H(m[f],1),m[f].m(u,null))}for(ce(),f=W.length;f<m.length;f+=1)Re(f);oe()}(!N||c&8)&&I!==(I=`Total Results: ${o[3]}`)&&Z(q,I),(!N||c&4)&&j!==(j=o[2].factionEquals+"")&&Z(L,j),c&3&&(O=o[1],ce(),y=De(y,c,ae,1,o,O,$,T,je,pe,null,he),oe())},i(o){if(!N){for(let c=0;c<W.length;c+=1)H(m[c]);for(let c=0;c<O.length;c+=1)H(y[c]);N=!0}},o(o){m=m.filter(Boolean);for(let c=0;c<m.length;c+=1)Q(m[c]);for(let c=0;c<y.length;c+=1)Q(y[c]);N=!1},d(o){o&&d(e),o&&d(t),o&&d(l),v&&v.d(),be(m,o),o&&d(U),o&&d(T);for(let c=0;c<y.length;c+=1)y[c].d();B=!1,Te(w)}}}function xe(n,e,s){let t,l,a;me(n,G,h=>s(2,a=h));let{data:r}=e;function i(){ve(G,a.factionEquals=!a.factionEquals,a),console.log(a)}function u(){a.searchField=this.value,G.set(a)}return n.$$set=h=>{"data"in h&&s(0,r=h.data)},n.$$.update=()=>{n.$$.dirty&5&&s(1,t=He(a.searchField,r.totalCardInfo,r.totalCardNames,a.factionFilter,a.factionEquals)),n.$$.dirty&2&&s(3,l=t.length)},[r,t,a,l,i,u]}class Je extends ee{constructor(e){super(),te(this,e,xe,Oe,le,{data:0})}}export{Je as default};
